# LightPlane AI 项目库使用分析报告

## 📊 分析概述

本报告分析了LightPlane AI项目中实际使用的Python库和文件，识别了核心依赖和可选依赖，并标记了可能未使用的文件。

## 🔧 核心依赖库

### 必需库（游戏核心）
- **pygame**: 游戏引擎，所有游戏页面都使用
- **os**: 操作系统接口，文件路径处理
- **sys**: 系统相关功能
- **random**: 随机数生成
- **time**: 时间相关功能
- **threading**: 多线程支持

### 必需库（AI功能）
- **numpy**: 数值计算，图像处理
- **PIL (Pillow)**: 图像处理
- **torch**: PyTorch深度学习框架
- **cv2 (OpenCV)**: 计算机视觉库

## 🎯 可选依赖库

### AI图片处理（可选）
- **rembg**: 高质量背景去除
- **segment_anything**: Meta的SAM模型
- **diffusers**: Stable Diffusion模型
- **transformers**: Hugging Face模型库

### 强化学习（可选）
- **gymnasium**: 强化学习环境
- **stable_baselines3**: 强化学习算法

### 系统监控（可选）
- **psutil**: 系统进程和资源监控

## 📁 文件使用分析

### 🟢 核心文件（必需）
```
launcher.py                    # 游戏启动器
plane_sprites.py              # 游戏精灵类
game_function.py              # 游戏功能函数
Tools.py                      # 工具类
custom_config_page.py         # 自定义配置页面
custom_game_page.py           # 自定义游戏页面
ai_image_processor.py         # AI图片处理器
background_remover.py         # AI背景去除器
local_image_generator.py      # 本地AI图片生成器
```

### 🟡 游戏页面文件（必需）
```
traditional_game_page.py      # 传统模式游戏页面
dual_game_page.py             # 双人模式游戏页面
ai_game_page.py               # AI模式游戏页面
easter_egg_page.py            # 彩蛋模式游戏页面
```

### 🟡 AI控制器文件（可选）
```
ai_controllers/
├── __init__.py              # AI包初始化
├── optimized_ai_controller.py # 优化的AI控制器
├── plane_fighter_env.py     # Gymnasium环境
└── trained_ai_controller.py # 训练好的AI控制器
```

### 🟡 工具文件（可选）
```
pyqt5_file_selector.py        # 文件选择器
install_ai_dependencies.py    # AI依赖安装脚本
```

### 🔴 可能未使用的文件

#### 测试和调试文件
```
test_*.py                     # 各种测试文件
debug_*.py                    # 调试文件
demo_*.py                     # 演示文件
```

#### 旧版本文件
```
complex_image_matting.py      # 旧版本图片处理
complex_image_matting_fixed.py # 修复版本
advanced_ai_matting.py        # 高级版本
ai_generated_image_matting.py # AI生成图片处理
```

#### 监控和检查文件
```
check_training_status.py      # 训练状态检查
monitor_training.py           # 训练监控
```

#### 训练相关文件
```
rl_ai_controller.py           # 旧版本强化学习控制器
train_ai.py                   # AI训练脚本
check_training.py             # 训练检查脚本
```

#### 数据集和输出
```
airplane_dataset/             # 飞机图片数据集
lora_output/                  # LoRA训练输出
lora_output_simple/           # 简化LoRA输出
processed_images/             # 处理后的图片
```

## 🗑️ 建议删除的文件

### 1. 测试和调试文件
```bash
# 这些文件主要用于开发和测试，生产环境可以删除
rm test_*.py
rm debug_*.py
rm demo_*.py
```

### 2. 旧版本文件
```bash
# 这些文件已被新版本替代
rm complex_image_matting.py
rm complex_image_matting_fixed.py
rm advanced_ai_matting.py
rm ai_generated_image_matting.py
```

### 3. 未使用的监控文件
```bash
# 这些文件在核心功能中未使用
rm check_training_status.py
rm monitor_training.py
```

### 4. 旧版本AI控制器
```bash
# 已被新版本替代
rm rl_ai_controller.py
```

### 5. 训练相关文件（如果不需要训练）
```bash
# 如果不需要训练AI模型，可以删除
rm train_ai.py
rm check_training.py
```

### 6. 数据集和输出目录（如果不需要）
```bash
# 如果不需要这些数据，可以删除
rm -rf airplane_dataset/
rm -rf lora_output/
rm -rf lora_output_simple/
rm -rf processed_images/
```

## 📋 依赖安装建议

### 最小安装（仅游戏功能）
```bash
pip install pygame numpy pillow
```

### 标准安装（包含AI图片处理）
```bash
pip install pygame numpy pillow opencv-python
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu
```

### 完整安装（包含所有AI功能）
```bash
pip install pygame numpy pillow opencv-python
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu
pip install rembg diffusers transformers accelerate
pip install stable-baselines3 gymnasium
```

## 🎯 清理后的项目结构

```
LightPlane_AI/
├── README.md                      # 项目说明
├── launcher.py                    # 游戏启动器
├── plane_sprites.py              # 游戏精灵类
├── game_function.py              # 游戏功能函数
├── Tools.py                      # 工具类
├── custom_config_page.py         # 自定义配置页面
├── custom_game_page.py           # 自定义游戏页面
├── traditional_game_page.py      # 传统模式
├── dual_game_page.py             # 双人模式
├── ai_game_page.py               # AI模式
├── easter_egg_page.py            # 彩蛋模式
├── ai_image_processor.py         # AI图片处理器
├── background_remover.py         # AI背景去除器
├── local_image_generator.py      # 本地AI图片生成器
├── pyqt5_file_selector.py        # 文件选择器
├── install_ai_dependencies.py    # AI依赖安装
├── ai_controllers/               # AI控制器包
│   ├── __init__.py
│   ├── optimized_ai_controller.py
│   ├── plane_fighter_env.py
│   └── trained_ai_controller.py
├── images/                       # 游戏图片资源
├── music/                        # 游戏音乐资源
├── models/                       # AI模型文件
├── logs/                         # 训练日志
└── 文档文件/                     # 各种说明文档
```

## ⚠️ 注意事项

1. **备份重要文件**: 删除前请备份重要文件
2. **测试功能**: 删除文件后请测试核心功能是否正常
3. **依赖关系**: 某些文件可能被其他文件间接引用
4. **版本控制**: 建议使用Git进行版本控制，可以随时恢复

## 🎯 清理建议

1. **第一阶段**: 删除明显的测试和调试文件
2. **第二阶段**: 删除旧版本和重复文件
3. **第三阶段**: 删除未使用的监控和训练文件
4. **第四阶段**: 清理数据集和输出目录
5. **测试验证**: 每阶段完成后测试功能完整性

---

**通过清理，项目将更加精简，维护更容易，用户体验更好！** 🚀✨
