# 🚀 AI训练命令速查表

## 📋 快速开始

### 1. 环境准备
```bash
# 创建目录
mkdir -p models logs

# 检查Python版本
python3 --version

# 安装依赖
pip3 install stable-baselines3[extra] gymnasium pygame numpy
```

### 2. 开始训练
```bash
# 训练100万步
python3 train_ai.py --mode train --timesteps 1000000

# 训练200万步
python3 train_ai.py --mode train --timesteps 2000000

# 训练500万步
python3 train_ai.py --mode train --timesteps 5000000
```

### 3. 监控训练
```bash
# 检查训练状态
python3 check_training.py

# 查看训练进程
ps aux | grep train_ai

# 检查模型文件
ls -la models/

# 检查训练日志
ls -la logs/
```

## 🎮 测试模型

### 1. 测试训练好的AI
```bash
# 测试最终模型
python3 train_ai.py --mode test --model ./models/ppo_plane_fighter_final --episodes 5

# 测试最佳模型
python3 train_ai.py --mode test --model ./models/best_model --episodes 5
```

### 2. 在游戏中体验AI
```bash
# 启动游戏
python3 launcher.py

# 选择 "AI Mode" 体验AI表现
```

## 🔧 训练参数调整

### 修改训练参数
```bash
# 编辑 train_ai.py 文件
nano train_ai.py

# 主要参数位置：
# - total_timesteps: 总训练步数
# - learning_rate: 学习率
# - batch_size: 批大小
# - n_envs: 并行环境数量
```

### 修改环境参数
```bash
# 编辑 plane_fighter_env.py 文件
nano plane_fighter_env.py

# 主要参数位置：
# - max_steps: 每回合最大步数
# - enemy_spawn_rate: 敌人生成概率
# - enemy_fire_rate: 敌人射击概率
```

## 🚨 故障排除

### 训练中断
```bash
# 检查进程
ps aux | grep train_ai

# 重新启动
python3 train_ai.py --mode train --timesteps 2000000
```

### 模型加载失败
```bash
# 检查模型文件
ls -la models/

# 使用备用模型
python3 train_ai.py --mode test --model ./models/best_model
```

### 训练速度慢
```bash
# 检查系统资源
top
htop

# 减少并行环境数量
# 在 train_ai.py 中修改 n_envs = 4
```

## 📊 训练进度检查

### 查看当前进度
```bash
# 运行监控脚本
python3 check_training.py

# 输出示例：
# 🚀 AI训练状态检查
# 📊 训练进程状态: ✅ 训练进程运行中 (PID: 65258)
# 🧠 模型文件状态: ppo_plane_fighter_600000_steps.zip
# 📝 训练日志状态: 最新训练目录: PPO_11
```

### 查看模型文件
```bash
# 列出所有模型
ls -la models/

# 按时间排序
ls -la models/ | grep -E "(best_model|ppo_plane_fighter)" | tail -5
```

## 🎯 常用命令组合

### 完整训练流程
```bash
# 1. 准备环境
mkdir -p models logs

# 2. 开始训练
python3 train_ai.py --mode train --timesteps 1000000

# 3. 监控训练（新终端）
python3 check_training.py

# 4. 测试模型
python3 train_ai.py --mode test --model ./models/ppo_plane_fighter_final --episodes 5

# 5. 体验游戏
python3 launcher.py
```

### 快速状态检查
```bash
# 一键检查所有状态
echo "=== 训练进程 ===" && ps aux | grep train_ai | grep -v grep
echo "=== 模型文件 ===" && ls -la models/ | grep -E "(best_model|ppo_plane_fighter)" | tail -3
echo "=== 训练日志 ===" && ls -la logs/ | grep PPO | tail -3
```

## 📝 重要文件说明

| 文件 | 作用 | 修改频率 |
|------|------|----------|
| `train_ai.py` | 训练脚本 | 偶尔（参数调整） |
| `plane_fighter_env.py` | 训练环境 | 偶尔（难度调整） |
| `check_training.py` | 监控脚本 | 不修改 |
| `models/` | 模型保存目录 | 自动生成 |
| `logs/` | 训练日志目录 | 自动生成 |

## ⏰ 训练时间估算

| 训练步数 | 预计时间 | 说明 |
|----------|----------|------|
| 100万步 | 1-2小时 | 基础技能学习 |
| 200万步 | 2-3小时 | 技能优化 |
| 500万步 | 5-8小时 | 高级策略 |

## 🔄 训练循环

```bash
# 训练 → 监控 → 测试 → 调整 → 继续训练

# 1. 启动训练
python3 train_ai.py --mode train --timesteps 1000000

# 2. 定期监控
python3 check_training.py

# 3. 测试当前模型
python3 train_ai.py --mode test --model ./models/best_model

# 4. 根据结果调整参数
# 5. 继续训练或重新开始
```

---

**💡 提示**: 训练过程中保持终端窗口打开，训练会自动保存检查点模型。
